# WW日志系统用户指南

## 1. 快速开始

### 1.1 添加日志语句

在代码中添加日志语句非常简单：

```c
LOG_INF("Application started");  // 信息级别日志
LOG_DBG("Value: %d", value);     // 调试级别日志(带参数)
```

可用日志级别：
- `LOG_ERR()` - 错误
- `LOG_WRN()` - 警告
- `LOG_INF()` - 信息
- `LOG_DBG()` - 调试

### 1.2 查看日志输出

根据配置的日志模式，输出会有所不同：

**字符串模式**:
```
[INF] app_main.c:42 - Application started
[DBG] app_main.c:45 - Value: 123
```

**编码模式**:
```
0x8000002A 0x0000007B
```

## 2. 配置系统

### 2.1 修改log_config.json

配置文件结构：
```json
{
  "modules": {
    "MODULE_NAME": {
      "id": 1,
      "enable": true,
      "base_id": 64,
      "description": "模块描述"
    }
  },
  "files": {
    "path/to/file.c": {
      "module": "MODULE_NAME",
      "offset": 1,
      "description": "文件描述"
    }
  }
}
```

### 2.2 添加新文件

1. 在`log_config.json`的`files`部分添加新条目
2. 指定所属模块和偏移量
3. 运行`make clean all`重新生成文件ID

## 3. 构建选项

### 3.1 选择日志模式

编辑`include/ww_log.h`，取消注释所需模式：
```c
#define WW_LOG_MODE_STR      // 字符串模式
// #define WW_LOG_MODE_ENCODE // 编码模式
// #define WW_LOG_MODE_DISABLED // 禁用日志
```

### 3.2 模块控制

编译时禁用模块：
```bash
make STATIC_OPTS="-DWW_LOG_STATIC_MODULE_DEMO_EN=0"
```

运行时禁用模块：
```c
ww_log_disable_module(WW_LOG_MODULE_DEMO);
```

## 4. 日志级别控制

### 4.1 编译时过滤

在`ww_log.h`中修改：
```c
#define WW_LOG_COMPILE_THRESHOLD WW_LOG_LEVEL_INF  // 只编译ERR/WRN/INF级别
```

### 4.2 运行时过滤
```c
ww_log_set_level_threshold(WW_LOG_LEVEL_WRN);  // 只输出ERR/WRN级别
```

## 5. 示例代码

### 5.1 基本使用
```c
#include "ww_log.h"

void example_function(int value) {
    LOG_INF("Function entered");
    LOG_DBG("Parameter value: %d", value);

    if (value < 0) {
        LOG_ERR("Invalid value: %d", value);
    }
}
```

### 5.2 模块控制
```c
// 启用DEMO模块
ww_log_enable_module(WW_LOG_MODULE_DEMO);

// 检查模块是否启用
if (ww_log_is_module_enabled(WW_LOG_MODULE_TEST)) {
    LOG_INF("Test module is enabled");
}
```

## 6. 常见问题

**Q: 为什么我的日志没有输出？**
A: 检查：
1. 日志模式是否已启用
2. 模块是否已启用
3. 日志级别是否高于阈值

**Q: 如何添加新模块？**
A: 在`log_config.json`的`modules`部分添加新条目，然后重新生成文件ID
